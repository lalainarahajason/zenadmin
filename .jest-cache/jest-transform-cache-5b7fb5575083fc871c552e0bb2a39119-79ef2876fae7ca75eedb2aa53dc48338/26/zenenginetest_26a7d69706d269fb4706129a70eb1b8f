3428e1f955a59f3abb61c6a87f485ca4
/**
 * @jest-environment jsdom
 */

const $ = require('jquery');
global.$ = global.jQuery = $;
describe('ZenAdmin Engine', () => {
  let Engine;
  beforeEach(() => {
    // Reset DOM
    document.body.innerHTML = `
            <div id="wp-admin-bar-zenadmin-toggle"></div>
            <div id="wp-admin-bar-zenadmin-clear-session"><a></a></div>
            <div class="zenadmin-hover-overlay"></div>
        `;
    document.body.classList.remove('zenadmin-mode-active');

    // Mock Config
    window.zenadminConfig = {
      nonce: 'test-nonce',
      ajaxUrl: '/wp-admin/admin-ajax.php',
      whitelist: ['#wpadminbar'],
      blocked: {},
      i18n: {
        confirmTitle: 'Hide',
        confirm: 'Hide',
        cancel: 'Cancel'
      }
    };

    // Load the file content to execute the IIFE
    jest.resetModules();
    require('../../assets/zen-engine.js');
    Engine = window.ZenAdminEngine;
  });
  test('Engine should be defined', () => {
    expect(Engine).toBeDefined();
  });
  test('toggleMode should toggle class on body', () => {
    // Initial state
    expect(Engine.isActive).toBe(false);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(false);

    // Toggle ON
    Engine.toggleMode();
    expect(Engine.isActive).toBe(true);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(true);

    // Toggle OFF
    Engine.toggleMode();
    expect(Engine.isActive).toBe(false);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(false);
  });
  test('toggleMode(true) should force active state', () => {
    Engine.toggleMode(true);
    expect(Engine.isActive).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyIkIiwicmVxdWlyZSIsImdsb2JhbCIsImpRdWVyeSIsImRlc2NyaWJlIiwiRW5naW5lIiwiYmVmb3JlRWFjaCIsImRvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIndpbmRvdyIsInplbmFkbWluQ29uZmlnIiwibm9uY2UiLCJhamF4VXJsIiwid2hpdGVsaXN0IiwiYmxvY2tlZCIsImkxOG4iLCJjb25maXJtVGl0bGUiLCJjb25maXJtIiwiY2FuY2VsIiwiamVzdCIsInJlc2V0TW9kdWxlcyIsIlplbkFkbWluRW5naW5lIiwidGVzdCIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwiaXNBY3RpdmUiLCJ0b0JlIiwiY29udGFpbnMiLCJ0b2dnbGVNb2RlIl0sInNvdXJjZXMiOlsiemVuLWVuZ2luZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuXG5jb25zdCAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG5nbG9iYWwuJCA9IGdsb2JhbC5qUXVlcnkgPSAkO1xuXG5kZXNjcmliZSgnWmVuQWRtaW4gRW5naW5lJywgKCkgPT4ge1xuICAgIGxldCBFbmdpbmU7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gUmVzZXQgRE9NXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBpZD1cIndwLWFkbWluLWJhci16ZW5hZG1pbi10b2dnbGVcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ3cC1hZG1pbi1iYXItemVuYWRtaW4tY2xlYXItc2Vzc2lvblwiPjxhPjwvYT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ6ZW5hZG1pbi1ob3Zlci1vdmVybGF5XCI+PC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnemVuYWRtaW4tbW9kZS1hY3RpdmUnKTtcblxuICAgICAgICAvLyBNb2NrIENvbmZpZ1xuICAgICAgICB3aW5kb3cuemVuYWRtaW5Db25maWcgPSB7XG4gICAgICAgICAgICBub25jZTogJ3Rlc3Qtbm9uY2UnLFxuICAgICAgICAgICAgYWpheFVybDogJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsXG4gICAgICAgICAgICB3aGl0ZWxpc3Q6IFsnI3dwYWRtaW5iYXInXSxcbiAgICAgICAgICAgIGJsb2NrZWQ6IHt9LFxuICAgICAgICAgICAgaTE4bjogeyBjb25maXJtVGl0bGU6ICdIaWRlJywgY29uZmlybTogJ0hpZGUnLCBjYW5jZWw6ICdDYW5jZWwnIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBmaWxlIGNvbnRlbnQgdG8gZXhlY3V0ZSB0aGUgSUlGRVxuICAgICAgICBqZXN0LnJlc2V0TW9kdWxlcygpO1xuICAgICAgICByZXF1aXJlKCcuLi8uLi9hc3NldHMvemVuLWVuZ2luZS5qcycpO1xuXG4gICAgICAgIEVuZ2luZSA9IHdpbmRvdy5aZW5BZG1pbkVuZ2luZTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0VuZ2luZSBzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KEVuZ2luZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3RvZ2dsZU1vZGUgc2hvdWxkIHRvZ2dsZSBjbGFzcyBvbiBib2R5JywgKCkgPT4ge1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIGV4cGVjdChFbmdpbmUuaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbmFkbWluLW1vZGUtYWN0aXZlJykpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBPTlxuICAgICAgICBFbmdpbmUudG9nZ2xlTW9kZSgpO1xuICAgICAgICBleHBlY3QoRW5naW5lLmlzQWN0aXZlKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbmFkbWluLW1vZGUtYWN0aXZlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIE9GRlxuICAgICAgICBFbmdpbmUudG9nZ2xlTW9kZSgpO1xuICAgICAgICBleHBlY3QoRW5naW5lLmlzQWN0aXZlKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd6ZW5hZG1pbi1tb2RlLWFjdGl2ZScpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3RvZ2dsZU1vZGUodHJ1ZSkgc2hvdWxkIGZvcmNlIGFjdGl2ZSBzdGF0ZScsICgpID0+IHtcbiAgICAgICAgRW5naW5lLnRvZ2dsZU1vZGUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChFbmdpbmUuaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBLE1BQU1BLENBQUMsR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUMzQkMsTUFBTSxDQUFDRixDQUFDLEdBQUdFLE1BQU0sQ0FBQ0MsTUFBTSxHQUFHSCxDQUFDO0FBRTVCSSxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUM5QixJQUFJQyxNQUFNO0VBRVZDLFVBQVUsQ0FBQyxNQUFNO0lBQ2I7SUFDQUMsUUFBUSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsR0FBRztBQUNsQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0lBQ0RGLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQzs7SUFFdEQ7SUFDQUMsTUFBTSxDQUFDQyxjQUFjLEdBQUc7TUFDcEJDLEtBQUssRUFBRSxZQUFZO01BQ25CQyxPQUFPLEVBQUUsMEJBQTBCO01BQ25DQyxTQUFTLEVBQUUsQ0FBQyxhQUFhLENBQUM7TUFDMUJDLE9BQU8sRUFBRSxDQUFDLENBQUM7TUFDWEMsSUFBSSxFQUFFO1FBQUVDLFlBQVksRUFBRSxNQUFNO1FBQUVDLE9BQU8sRUFBRSxNQUFNO1FBQUVDLE1BQU0sRUFBRTtNQUFTO0lBQ3BFLENBQUM7O0lBRUQ7SUFDQUMsSUFBSSxDQUFDQyxZQUFZLENBQUMsQ0FBQztJQUNuQnRCLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztJQUVyQ0ksTUFBTSxHQUFHTyxNQUFNLENBQUNZLGNBQWM7RUFDbEMsQ0FBQyxDQUFDO0VBRUZDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0lBQ25DQyxNQUFNLENBQUNyQixNQUFNLENBQUMsQ0FBQ3NCLFdBQVcsQ0FBQyxDQUFDO0VBQ2hDLENBQUMsQ0FBQztFQUVGRixJQUFJLENBQUMsd0NBQXdDLEVBQUUsTUFBTTtJQUNqRDtJQUNBQyxNQUFNLENBQUNyQixNQUFNLENBQUN1QixRQUFRLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNuQ0gsTUFBTSxDQUFDbkIsUUFBUSxDQUFDQyxJQUFJLENBQUNFLFNBQVMsQ0FBQ29CLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUNELElBQUksQ0FBQyxLQUFLLENBQUM7O0lBRTVFO0lBQ0F4QixNQUFNLENBQUMwQixVQUFVLENBQUMsQ0FBQztJQUNuQkwsTUFBTSxDQUFDckIsTUFBTSxDQUFDdUIsUUFBUSxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbENILE1BQU0sQ0FBQ25CLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRSxTQUFTLENBQUNvQixRQUFRLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDOztJQUUzRTtJQUNBeEIsTUFBTSxDQUFDMEIsVUFBVSxDQUFDLENBQUM7SUFDbkJMLE1BQU0sQ0FBQ3JCLE1BQU0sQ0FBQ3VCLFFBQVEsQ0FBQyxDQUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25DSCxNQUFNLENBQUNuQixRQUFRLENBQUNDLElBQUksQ0FBQ0UsU0FBUyxDQUFDb0IsUUFBUSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQztFQUNoRixDQUFDLENBQUM7RUFFRkosSUFBSSxDQUFDLDRDQUE0QyxFQUFFLE1BQU07SUFDckRwQixNQUFNLENBQUMwQixVQUFVLENBQUMsSUFBSSxDQUFDO0lBQ3ZCTCxNQUFNLENBQUNyQixNQUFNLENBQUN1QixRQUFRLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztFQUN0QyxDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=