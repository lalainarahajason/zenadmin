23bc28d6370ec269be6cd7dfb9e32558
/**
 * @jest-environment jsdom
 */

// Mock jQuery to avoid npm install errors locally
const mockJQuery = function (selector) {
  return {
    ready: function (callback) {
      callback();
    }
  };
};
global.$ = global.jQuery = mockJQuery;
describe('ZenAdmin Engine', () => {
  let Engine;
  beforeEach(() => {
    // Reset DOM
    document.body.innerHTML = `
            <div id="wp-admin-bar-zenadmin-toggle"></div>
            <div id="wp-admin-bar-zenadmin-clear-session"><a></a></div>
            <div class="zenadmin-hover-overlay"></div>
        `;
    document.body.classList.remove('zenadmin-mode-active');

    // Mock Config
    window.zenadminConfig = {
      nonce: 'test-nonce',
      ajaxUrl: '/wp-admin/admin-ajax.php',
      whitelist: ['#wpadminbar'],
      blocked: {},
      i18n: {
        confirmTitle: 'Hide',
        confirm: 'Hide',
        cancel: 'Cancel'
      }
    };

    // Load the file content to execute the IIFE
    jest.resetModules();
    require('../../assets/zen-engine.js');
    Engine = window.ZenAdminEngine;
  });
  test('Engine should be defined', () => {
    expect(Engine).toBeDefined();
  });
  test('toggleMode should toggle class on body', () => {
    // Initial state
    expect(Engine.isActive).toBe(false);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(false);

    // Toggle ON
    Engine.toggleMode();
    expect(Engine.isActive).toBe(true);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(true);

    // Toggle OFF
    Engine.toggleMode();
    expect(Engine.isActive).toBe(false);
    expect(document.body.classList.contains('zenadmin-mode-active')).toBe(false);
  });
  test('toggleMode(true) should force active state', () => {
    Engine.toggleMode(true);
    expect(Engine.isActive).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2NrSlF1ZXJ5Iiwic2VsZWN0b3IiLCJyZWFkeSIsImNhbGxiYWNrIiwiZ2xvYmFsIiwiJCIsImpRdWVyeSIsImRlc2NyaWJlIiwiRW5naW5lIiwiYmVmb3JlRWFjaCIsImRvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIndpbmRvdyIsInplbmFkbWluQ29uZmlnIiwibm9uY2UiLCJhamF4VXJsIiwid2hpdGVsaXN0IiwiYmxvY2tlZCIsImkxOG4iLCJjb25maXJtVGl0bGUiLCJjb25maXJtIiwiY2FuY2VsIiwiamVzdCIsInJlc2V0TW9kdWxlcyIsInJlcXVpcmUiLCJaZW5BZG1pbkVuZ2luZSIsInRlc3QiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsImlzQWN0aXZlIiwidG9CZSIsImNvbnRhaW5zIiwidG9nZ2xlTW9kZSJdLCJzb3VyY2VzIjpbInplbi1lbmdpbmUudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXG4gKi9cblxuLy8gTW9jayBqUXVlcnkgdG8gYXZvaWQgbnBtIGluc3RhbGwgZXJyb3JzIGxvY2FsbHlcbmNvbnN0IG1vY2tKUXVlcnkgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWFkeTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5nbG9iYWwuJCA9IGdsb2JhbC5qUXVlcnkgPSBtb2NrSlF1ZXJ5O1xuXG5kZXNjcmliZSgnWmVuQWRtaW4gRW5naW5lJywgKCkgPT4ge1xuICAgIGxldCBFbmdpbmU7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gUmVzZXQgRE9NXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBpZD1cIndwLWFkbWluLWJhci16ZW5hZG1pbi10b2dnbGVcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ3cC1hZG1pbi1iYXItemVuYWRtaW4tY2xlYXItc2Vzc2lvblwiPjxhPjwvYT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ6ZW5hZG1pbi1ob3Zlci1vdmVybGF5XCI+PC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnemVuYWRtaW4tbW9kZS1hY3RpdmUnKTtcblxuICAgICAgICAvLyBNb2NrIENvbmZpZ1xuICAgICAgICB3aW5kb3cuemVuYWRtaW5Db25maWcgPSB7XG4gICAgICAgICAgICBub25jZTogJ3Rlc3Qtbm9uY2UnLFxuICAgICAgICAgICAgYWpheFVybDogJy93cC1hZG1pbi9hZG1pbi1hamF4LnBocCcsXG4gICAgICAgICAgICB3aGl0ZWxpc3Q6IFsnI3dwYWRtaW5iYXInXSxcbiAgICAgICAgICAgIGJsb2NrZWQ6IHt9LFxuICAgICAgICAgICAgaTE4bjogeyBjb25maXJtVGl0bGU6ICdIaWRlJywgY29uZmlybTogJ0hpZGUnLCBjYW5jZWw6ICdDYW5jZWwnIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBMb2FkIHRoZSBmaWxlIGNvbnRlbnQgdG8gZXhlY3V0ZSB0aGUgSUlGRVxuICAgICAgICBqZXN0LnJlc2V0TW9kdWxlcygpO1xuICAgICAgICByZXF1aXJlKCcuLi8uLi9hc3NldHMvemVuLWVuZ2luZS5qcycpO1xuXG4gICAgICAgIEVuZ2luZSA9IHdpbmRvdy5aZW5BZG1pbkVuZ2luZTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0VuZ2luZSBzaG91bGQgYmUgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KEVuZ2luZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3RvZ2dsZU1vZGUgc2hvdWxkIHRvZ2dsZSBjbGFzcyBvbiBib2R5JywgKCkgPT4ge1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIGV4cGVjdChFbmdpbmUuaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbmFkbWluLW1vZGUtYWN0aXZlJykpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgIC8vIFRvZ2dsZSBPTlxuICAgICAgICBFbmdpbmUudG9nZ2xlTW9kZSgpO1xuICAgICAgICBleHBlY3QoRW5naW5lLmlzQWN0aXZlKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbmFkbWluLW1vZGUtYWN0aXZlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgLy8gVG9nZ2xlIE9GRlxuICAgICAgICBFbmdpbmUudG9nZ2xlTW9kZSgpO1xuICAgICAgICBleHBlY3QoRW5naW5lLmlzQWN0aXZlKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCd6ZW5hZG1pbi1tb2RlLWFjdGl2ZScpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3RvZ2dsZU1vZGUodHJ1ZSkgc2hvdWxkIGZvcmNlIGFjdGl2ZSBzdGF0ZScsICgpID0+IHtcbiAgICAgICAgRW5naW5lLnRvZ2dsZU1vZGUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChFbmdpbmUuaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTUEsVUFBVSxHQUFHLFNBQUFBLENBQVVDLFFBQVEsRUFBRTtFQUNuQyxPQUFPO0lBQ0hDLEtBQUssRUFBRSxTQUFBQSxDQUFVQyxRQUFRLEVBQUU7TUFDdkJBLFFBQVEsQ0FBQyxDQUFDO0lBQ2Q7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUNEQyxNQUFNLENBQUNDLENBQUMsR0FBR0QsTUFBTSxDQUFDRSxN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